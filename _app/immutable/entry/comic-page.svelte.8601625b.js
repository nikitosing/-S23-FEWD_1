import{S as G,i as M,s as N,K as V,e as B,b as $,L as F,D as _,h as l,k as i,q as h,l as p,m as u,r as d,p as J,C as r,a as k,c as w,n as b,E as O,y as Q,z as T,A as W,g as Y,d as Z,B as tt}from"../chunks/index.736c5e14.js";const et="https://fwd.innopolis.app/api/hw2?",at="https://getxkcd.vercel.app/api/comic?",nt="n.pozdniakov@innopolis.university";async function st(n){const t=new URLSearchParams;return n&&t.append("email",n),(await fetch(et+t.toString())).json()}async function rt(n){const t=new URLSearchParams;return t.append("num",n.toString()),(await fetch(at+t.toString())).json()}async function ot(){const n=await st(nt),t=await rt(n),e=new Date(parseInt(t.year),parseInt(t.month)-1,parseInt(t.day),0,0,0);return{img:t.img,alt:t.alt,title:t.safe_title,dateString:e.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}}function lt(n){let t,e=n[2].message+"",a;return{c(){t=i("p"),a=h(e),this.h()},l(s){t=p(s,"P",{style:!0});var c=u(t);a=d(c,e),c.forEach(l),this.h()},h(){J(t,"color","red")},m(s,c){$(s,t,c),r(t,a)},p:_,d(s){s&&l(t)}}}function ct(n){let t,e,a,s,c,K=n[1].title+"",C,S,f,E,P,g,j=n[1].dateString+"",I,D,m,x,L,v,z=n[1].alt+"",q;return{c(){t=i("div"),e=i("h1"),a=h("XKCD:"),s=k(),c=i("h2"),C=h(K),S=k(),f=i("p"),E=h("Comic uploaded:"),P=k(),g=i("p"),I=h(j),D=k(),m=i("img"),L=k(),v=i("p"),q=h(z),this.h()},l(y){t=p(y,"DIV",{class:!0});var o=u(t);e=p(o,"H1",{});var H=u(e);a=d(H,"XKCD:"),H.forEach(l),s=w(o),c=p(o,"H2",{});var R=u(c);C=d(R,K),R.forEach(l),S=w(o),f=p(o,"P",{});var U=u(f);E=d(U,"Comic uploaded:"),U.forEach(l),P=w(o),g=p(o,"P",{});var X=u(g);I=d(X,j),X.forEach(l),D=w(o),m=p(o,"IMG",{class:!0,src:!0,alt:!0}),L=w(o),v=p(o,"P",{});var A=u(v);q=d(A,z),A.forEach(l),o.forEach(l),this.h()},h(){b(m,"class","xkcd-img svelte-1bs4mwy"),O(m.src,x=n[1].img)||b(m,"src",x),b(m,"alt",n[1].alt),b(t,"class","info-block svelte-1bs4mwy")},m(y,o){$(y,t,o),r(t,e),r(e,a),r(t,s),r(t,c),r(c,C),r(t,S),r(t,f),r(f,E),r(t,P),r(t,g),r(g,I),r(t,D),r(t,m),r(t,L),r(t,v),r(v,q)},p:_,d(y){y&&l(t)}}}function it(n){let t,e;return{c(){t=i("p"),e=h("...waiting")},l(a){t=p(a,"P",{});var s=u(t);e=d(s,"...waiting"),s.forEach(l)},m(a,s){$(a,t,s),r(t,e)},p:_,d(a){a&&l(t)}}}function pt(n){let t,e={ctx:n,current:null,token:null,hasCatch:!0,pending:it,then:ct,catch:lt,value:1,error:2};return V(n[0],e),{c(){t=B(),e.block.c()},l(a){t=B(),e.block.l(a)},m(a,s){$(a,t,s),e.block.m(a,e.anchor=s),e.mount=()=>t.parentNode,e.anchor=t},p(a,[s]){n=a,F(e,n,s)},i:_,o:_,d(a){a&&l(t),e.block.d(a),e.token=null,e=null}}}function ut(n){return[ot()]}class mt extends G{constructor(t){super(),M(this,t,ut,pt,N,{})}}function ht(n){let t,e;return t=new mt({}),{c(){Q(t.$$.fragment)},l(a){T(t.$$.fragment,a)},m(a,s){W(t,a,s),e=!0},p:_,i(a){e||(Y(t.$$.fragment,a),e=!0)},o(a){Z(t.$$.fragment,a),e=!1},d(a){tt(t,a)}}}class _t extends G{constructor(t){super(),M(this,t,null,ht,N,{})}}export{_t as default};
